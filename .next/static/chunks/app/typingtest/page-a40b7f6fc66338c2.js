(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{1607:(e,t,s)=>{Promise.resolve().then(s.bind(s,1705))},1705:(e,t,s)=>{"use strict";s.d(t,{default:()=>_});var r=s(7437),n=s(4611),l=s.n(n);s(1643);var a=s(2265),i=s(6463),o=s(996),c=s.n(o);let u=["cat","dog","home","ball","run","smile"],d=["typing","keyboard","history","player","journey","mistake","window"],h=["psychology","philosophy","synchronization","responsibility","metamorphosis"];function p(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)("time"),[n,l]=(0,a.useState)(60),[o,p]=(0,a.useState)("medium"),[_,g]=(0,a.useState)([]),[m,x]=(0,a.useState)(0),[y,T]=(0,a.useState)(""),[f,j]=(0,a.useState)(0),[v,M]=(0,a.useState)(0),[S,b]=(0,a.useState)(!1),[N,w]=(0,a.useState)(n),[C,k]=(0,a.useState)(null),[E,I]=(0,a.useState)(0),[F,D]=(0,a.useState)(0),[P,B]=(0,a.useState)(100),[O,R]=(0,a.useState)(0),W=(0,a.useRef)(null),A=(0,a.useRef)(null);(0,a.useEffect)(()=>{"time"===t&&w(n)},[n,t]);let z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t="easy"===o?u:"hard"===o?h:d;return Array.from({length:e},()=>t[Math.floor(Math.random()*t.length)])},H=()=>{b(!1),k(null);let s=JSON.parse(localStorage.getItem("khelira:history")||"[]"),r={wpm:E,cpm:F,accuracy:P,accurateWPM:O,mode:t,duration:n,difficulty:o,timestamp:new Date().toLocaleString()};s.unshift(r),localStorage.setItem("khelira:history",JSON.stringify(s)),e.push("/result")};(0,a.useEffect)(()=>{if(!S||"time"!==t)return;if(N<=0){H();return}let e=setTimeout(()=>w(e=>e-1),1e3);return()=>clearTimeout(e)},[N,S,t]),(0,a.useEffect)(()=>{if(!S||!C)return;let e=setInterval(()=>{let e=Math.max((Date.now()-C)/1e3/60,.001),t=Math.max(v,1),s=v>0?(v-f)/v*100:100,r=Math.max(0,s)/100*(t/5/e),n=(v-f)/5/e;I((r>0?r:0).toFixed(2)),D((t/e).toFixed(2)),B(s>0?s.toFixed(2):"0.00"),R((n>0?n:0).toFixed(2))},1e3);return()=>clearInterval(e)},[S,v,f,C]),(0,a.useEffect)(()=>{if(A.current){let e=A.current.children[m];if(e){let t=A.current.clientHeight,s=e.clientHeight,r=e.offsetTop;A.current.scrollTop=r-t/2+s/2}}},[m,_.length]),(0,a.useEffect)(()=>{S&&W.current&&W.current.focus()},[S]),(0,a.useEffect)(()=>{S&&m>0&&m>=_.length-10&&"words"!==t&&g(e=>[...e,...z(30)])},[m,S,_.length,t]);let L=(e,t)=>{let s="";return t<m&&(s=""+e),t===m&&(s=y),e.split("").map((e,n)=>{let l="";return t<m?l=c().correct:t===m&&(n<s.length?l=e===s[n]?c().charCorrect:c().charIncorrect:n===s.length&&(l=c().activeChar)),(0,r.jsx)("span",{className:l,children:e},n)})};return(0,r.jsx)("div",{className:c().container,children:S?(0,r.jsxs)("div",{className:c().testArea,children:["time"===t&&(0,r.jsx)("div",{className:c().progress,children:(0,r.jsx)("div",{className:c().progressBar,style:{width:"".concat(N/n*100,"%")}})}),(0,r.jsx)("p",{ref:A,className:c().words,children:_.map((e,t)=>(0,r.jsxs)("span",{className:t===m?c().active:t<m?c().completed:"",children:[L(e,t)," "]},t))}),(0,r.jsx)("input",{ref:W,type:"text",value:y,onChange:e=>{let s=e.target.value;if(T(s),s.endsWith(" ")){let e=_[m]||"",r=s.trim(),l=r.length+1;M(e=>e+l);let a=0;for(let t=0;t<Math.max(e.length,r.length);t++)r[t]!==e[t]&&a++;j(e=>e+a),x(e=>e+1),T(""),"words"===t&&m+1>=n&&H()}},disabled:!S,className:c().input}),(0,r.jsxs)("div",{className:c().stats,children:[(0,r.jsxs)("p",{children:["WPM: ",E]}),(0,r.jsxs)("p",{children:["CPM: ",F]}),(0,r.jsxs)("p",{children:["Accuracy: ",P,"%"]}),(0,r.jsxs)("p",{children:["Accurate WPM: ",O]}),"time"===t&&(0,r.jsxs)("p",{children:["Time Left: ",N,"s"]})]}),(0,r.jsx)("button",{className:c().endBtn,onClick:H,children:"Doneeeee"})]}):(0,r.jsxs)("div",{className:c().setup,children:[(0,r.jsx)("h2",{children:"âš¡ Typing Test"}),(0,r.jsxs)("div",{className:c().controls,children:[(0,r.jsx)("label",{children:"Mode:"}),(0,r.jsxs)("select",{value:t,onChange:e=>s(e.target.value),children:[(0,r.jsx)("option",{value:"time",children:"Time"}),(0,r.jsx)("option",{value:"words",children:"Words"}),(0,r.jsx)("option",{value:"infinite",children:"Infinite"})]}),"time"===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{children:"Duration:"}),(0,r.jsxs)("select",{value:n,onChange:e=>l(Number(e.target.value)),children:[(0,r.jsx)("option",{value:30,children:"30s"}),(0,r.jsx)("option",{value:60,children:"60s"}),(0,r.jsx)("option",{value:120,children:"120s"})]})]}),"words"===t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{children:"Words:"}),(0,r.jsxs)("select",{value:n,onChange:e=>l(Number(e.target.value)),children:[(0,r.jsx)("option",{value:25,children:"25"}),(0,r.jsx)("option",{value:50,children:"50"}),(0,r.jsx)("option",{value:100,children:"100"})]})]}),(0,r.jsx)("label",{children:"Difficulty:"}),(0,r.jsxs)("select",{value:o,onChange:e=>p(e.target.value),children:[(0,r.jsx)("option",{value:"easy",children:"Easy"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"hard",children:"Hard"})]})," ",(0,r.jsx)("br",{}),(0,r.jsx)("button",{onClick:()=>{g(z("words"===t?n:30)),b(!0),k(Date.now()),T(""),x(0),j(0),M(0),I(0),D(0),B(100),R(0)},children:"Start Test"})]})]})})}function _(){return(0,a.useEffect)(()=>{try{localStorage.setItem("khelira:lastVisited","/typingtest")}catch(e){}},[]),(0,r.jsx)("section",{className:l().wrap,children:(0,r.jsx)(p,{mode:"normal"})})}},6463:(e,t,s)=>{"use strict";var r=s(1169);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},1643:()=>{},4611:e=>{e.exports={wrap:"typingtest_wrap__1Jzr5",badge:"typingtest_badge__Q_Oj2"}},996:e=>{e.exports={container:"TypingTestModule_container__E7zX2",setup:"TypingTestModule_setup__hxkMj",controls:"TypingTestModule_controls__DzH79",testArea:"TypingTestModule_testArea__mGx9I",words:"TypingTestModule_words__0O_0u",correct:"TypingTestModule_correct__GkTb_",active:"TypingTestModule_active__Dxb9x",upcoming:"TypingTestModule_upcoming__B4tAy",charCorrect:"TypingTestModule_charCorrect__h4fyV",charIncorrect:"TypingTestModule_charIncorrect__Kd_rq",activeChar:"TypingTestModule_activeChar__fFFaW",completed:"TypingTestModule_completed__VI8Oy",input:"TypingTestModule_input___4DOp",stats:"TypingTestModule_stats__Fd_Us",progress:"TypingTestModule_progress__E_tTh",progressBar:"TypingTestModule_progressBar__ybt_d",endBtn:"TypingTestModule_endBtn__9FWXX",resultPage:"TypingTestModule_resultPage__2k27_",currentResult:"TypingTestModule_currentResult__Iig_h",historyList:"TypingTestModule_historyList__QnfWB"}}},e=>{var t=t=>e(e.s=t);e.O(0,[477,794,783,130,215,744],()=>t(1607)),_N_E=e.O()}]);